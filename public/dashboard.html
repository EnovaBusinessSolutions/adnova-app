<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - ADNOVA</title>

  <!-- CSS propio -->
  <link rel="stylesheet" href="dashboard.css" />

  <!-- Tipograf√≠a -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- (Si m√°s tarde usas Recharts u otro lib) -->
  <script src="https://cdn.jsdelivr.net/npm/recharts/umd/Recharts.min.js"></script>
</head>
<body>
  <div class="dashboard-layout">
    <!-- ‚ñ∏‚ñ∏‚ñ∏ Barra lateral (sin cambios estructurales) -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="logo"><span class="text-shopify">AD</span>NOVA AI ü§ñ</div>
        <button class="sidebar-toggle">
          <svg width="16" height="16" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
        </button>
      </div>

      <!-- Navegaci√≥n -->
      <nav class="sidebar-nav">
        <ul>
          <li class="nav-item active"><a href="dashboard.html"> <span>Panel</span></a></li>
          <li class="nav-item"><a href="audit.html"> <span>Auditor√≠a</span></a></li>
          <li class="nav-item"><a href="pixel-verifier.html"> <span>Verificador de P√≠xeles</span></a></li>
          <li class="nav-item disabled"><a href="#"> <span>Pr√≥ximamente</span></a></li>
          <li class="nav-item"><a href="configuracion.html"> <span>Configuraci√≥n</span></a></li>
        </ul>
      </nav>

      <!-- Perfil -->
      <div class="sidebar-footer">
        <div class="user-profile">
          <div class="avatar">
            <svg width="20" height="20" viewBox="0 0 24 24" stroke="white" stroke-width="2" fill="none"><polygon points="6 3 18 3 22 9 12 21 2 9"/><line x1="12" y1="21" x2="12" y2="9"/><line x1="22" y1="9" x2="2" y2="9"/></svg>
          </div>
          <div class="user-info"><p id="user-email" class="user-email">Cargando correo‚Ä¶</p></div>
        </div>
      </div>
    </div>

    <!-- ‚ñ∏‚ñ∏‚ñ∏ Contenido principal -->
    <main class="main-content">
      <div class="dashboard">
        <div class="dashboard-header">
          <h1 class="page-title">Panel de Control</h1>
          <div class="sync-badge"><span class="sync-indicator"></span>√öltima sincronizaci√≥n: hace 2 minutos</div>
        </div>

        <!-- KPI Cards -->
        <div class="kpi-cards">
          <!-- Tr√°fico (placeholder por ahora) -->
          <div class="kpi-card">
            <div class="kpi-card-header"><h3>Tr√°fico de la Tienda</h3></div>
            <div class="kpi-data"><p class="kpi-value" id="trafficPlaceholder">‚Äî</p></div>
          </div>

          <!-- Pedidos -->
          <div class="kpi-card">
            <div class="kpi-card-header"><h3>Pedidos √∫ltimos 30 d√≠as</h3></div>
            <div class="kpi-data"><p class="kpi-value"><span id="totalOrders">‚Äî</span></p></div>
          </div>

          <!-- Ventas -->
          <div class="kpi-card">
            <div class="kpi-card-header"><h3>Ventas √∫ltimos 30 d√≠as</h3></div>
            <div class="kpi-data"><p class="kpi-value"><span id="totalSales">‚Äî</span></p></div>
          </div>

          <!-- Valor Promedio de Pedido (AOV) -->
          <div class="kpi-card">
            <div class="kpi-card-header"><h3>Valor Promedio de Pedido</h3></div>
            <div class="kpi-data"><p class="kpi-value"><span id="avgOrderValue">‚Äî</span></p></div>
          </div>
        </div>

        <!-- Embudo + Estado de P√≠xeles -->
        <div class="charts-section">
          <!-- Embudo -->
          <div class="chart-container">
            <h2 class="section-title">Embudo de Conversi√≥n</h2>
            <div class="bar-chart">
              <div class="chart-row">
                <div class="chart-label">A√±adir al Carrito</div>
                <div class="chart-bar-container">
                  <div class="chart-bar" style="width:0;"><span class="chart-value" id="funnelAddToCart">‚Äî</span></div>
                </div>
              </div>
              <div class="chart-row">
                <div class="chart-label">Iniciar Pago</div>
                <div class="chart-bar-container">
                  <div class="chart-bar" style="width:0;"><span class="chart-value" id="funnelCheckout">‚Äî</span></div>
                </div>
              </div>
              <div class="chart-row">
                <div class="chart-label">Compra</div>
                <div class="chart-bar-container">
                  <div class="chart-bar" style="width:0;"><span class="chart-value" id="funnelPurchase">‚Äî</span></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Estado de P√≠xeles (placeholder) -->
          <div class="chart-container">
            <h2 class="section-title">Estado de P√≠xeles</h2>
            <div class="pixel-status" id="pixelStatus">
              <!-- Se llenar√° cuando tengamos el scope `read_themes` -->
              <p class="helper-text">Pr√≥ximamente</p>
            </div>
          </div>
        </div>

        <!-- Top Productos -->
        <div class="top-products">
          <h2 class="section-title">Top 5 productos m√°s vendidos</h2>
          <ul id="topProducts"></ul>
        </div>

        <!-- Centro de Acciones -->
        <div class="action-center">
          <h2 class="section-title">Centro de Acciones</h2>
          <div class="action-items" id="actionCenter"></div>
        </div>
      </div>
    </main>
  </div>
  <!-- Scripts -->
  <script src="js/sessionCheck.js" defer></script>
  <script src="js/dashboard.js"  defer></script>
</body>
</html>
